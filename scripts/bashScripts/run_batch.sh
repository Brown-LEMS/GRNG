#!/bin/bash
#SBATCH -J uniform_3L_6D
#SBATCH -o slurms/uniform/slurm-%j.out 
#SBATCH --account=carney-bkimia-condo
#SBATCH -p batch
#SBATCH -N 1
#SBATCH -n 16
#SBATCH --mem=64G
#SBATCH --time=48:00:00
#SBATCH --array=8

cd /users/cfoste18/data/cfoste18/SISAP/HierarchicalRNG/bin/
module load gcc/8.3

export d="uniform"
export D=6

#               0    1    2     3     4     5      6      7      8      9       10      11      12       13       14       15
export N_Array=(3200 6400 12800 25600 51200 102400 204800 409600 819200 1638400 3276800 6553600 13107200 26214400 52428800 104857600)
export N=${N_Array[$SLURM_ARRAY_TASK_ID]}

# 6L 2D
# export r1_Array=(0.24514 0.2313 0.21824 0.20591 0.19429 0.18332 0.17296 0.1632 0.15398 0.14529 0.13708 0.12934 0.12204 0.11515 0.10864 0.10251)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.1634 0.14537 0.12934 0.11507 0.10238 0.09108 0.08103 0.0721 0.06414 0.05707 0.05077 0.04517 0.04019 0.03575 0.03181 0.0283)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}
# export r3_Array=(0.10891 0.09137 0.07665 0.0643 0.05394 0.04526 0.03797 0.03185 0.02672 0.02242 0.0188 0.01578 0.01323 0.0111 0.00931 0.00781)
# export r3=${r3_Array[$SLURM_ARRAY_TASK_ID]}
# export r4_Array=(0.0726 0.05743 0.04543 0.03593 0.02843 0.02249 0.01779 0.01407 0.01113 0.0088 0.00696 0.00551 0.00436 0.00345 0.00273 0.00216)
# export r4=${r4_Array[$SLURM_ARRAY_TASK_ID]}
# export r5_Array=(0.04839 0.03609 0.02692 0.02008 0.01498 0.01117 0.00833 0.00622 0.00464 0.00346 0.00258 0.00192 0.00144 0.00107 0.0008 0.0006)
# export r5=${r5_Array[$SLURM_ARRAY_TASK_ID]}

#5L 2D
# export r1_Array=(0.22604 0.21078 0.19656 0.18329 0.17092 0.15938 0.14863 0.1386 0.12924 0.12052 0.11238 0.1048 0.09773 0.09113 0.08498 0.07924)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.13892 0.12073 0.10492 0.09117 0.07923 0.06885 0.05984 0.052 0.04519 0.03927 0.03413 0.02966 0.02577 0.0224 0.01946 0.01691)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}
# export r3_Array=(0.08538 0.06915 0.056 0.04535 0.03673 0.02974 0.02409 0.01951 0.0158 0.01279 0.01036 0.00839 0.0068 0.0055 0.00446 0.00361)
# export r3=${r3_Array[$SLURM_ARRAY_TASK_ID]}
# export r4_Array=(0.05248 0.03961 0.02989 0.02256 0.01703 0.01285 0.0097 0.00732 0.00552 0.00417 0.00315 0.00237 0.00179 0.00135 0.00102 0.00077)
# export r4=${r4_Array[$SLURM_ARRAY_TASK_ID]}

#4L
# export r1_Array=(0.20014 0.18337 0.16801 0.15393 0.14103 0.12922 0.11839 0.10847 0.09938 0.09105 0.08343 0.07644 0.07003 0.06416 0.05879 0.05386)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.10891 0.09137 0.07665 0.0643 0.05394 0.04526 0.03797 0.03185 0.02672 0.02242 0.0188 0.01578 0.01323 0.0111 0.00931 0.00781)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}
# export r3_Array=(0.05927 0.04553 0.03497 0.02686 0.02063 0.01585 0.01217 0.00935 0.00718 0.00552 0.00424 0.00326 0.0025 0.00192 0.00148 0.00113)
# export r3=${r3_Array[$SLURM_ARRAY_TASK_ID]}

#4L 2D
# export r1_Array=(0.20014 0.18337 0.16801 0.15393 0.14103 0.12922 0.11839 0.10847 0.09938 0.09105 0.08343 0.07644 0.07003 0.06416 0.05879 0.05386)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.10891 0.09137 0.07665 0.0643 0.05394 0.04526 0.03797 0.03185 0.02672 0.02242 0.0188 0.01578 0.01323 0.0111 0.00931 0.00781)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}
# export r3_Array=(0.05927 0.04553 0.03497 0.02686 0.02063 0.01585 0.01217 0.00935 0.00718 0.00552 0.00424 0.00326 0.0025 0.00192 0.00148 0.00113)
# export r3=${r3_Array[$SLURM_ARRAY_TASK_ID]}

#3L 
# export r1_Array=(0.16942 0.14661 0.13029 0.11404 0.09868 0.08858 0.08127 0.07154 0.06159 0.05580 0.04951 0.04400 0.03910)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.07200 0.05813 0.04651 0.03518 0.02813 0.02247 0.01906 0.01335 0.01048 0.00845 0.00666 0.00523 0.00411)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}
# export r1_Array=(0.27456 0.25196 0.23000 0.21218 0.19322 0.17786 0.17905 0.16108 0.14497 0.13922 0.13015 0.12167 0.11374)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.19090 0.16696 0.15149 0.12771 0.10381 0.09091 0.07929 0.06916 0.05724 0.05053 0.04365 0.03771 0.03257)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}
# export r1_Array=(0.40326 0.37124 0.34422 0.32113 0.30092 0.26156 0.26029 0.23551 0.21825 0.20226 0.18744 0.17370 0.16098)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.33456 0.31738 0.27993 0.24610 0.22018 0.18389 0.17234 0.14912 0.13147 0.11590 0.10218 0.09009 0.07942)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}

# 3L 2D
# export r1_Array=(0.16942 0.14661 0.13029 0.11404 0.09868 0.08858 0.08127 0.07154 0.06159 0.05580 0.04951 0.04400 0.03910)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.07200 0.05813 0.04651 0.03518 0.02813 0.02247 0.01906 0.01335 0.01048 0.00845 0.00666 0.00523 0.00411)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}
# 3L 3D
# export r1_Array=(0.27456 0.25196 0.23000 0.21218 0.19322 0.17786 0.17905 0.16108 0.14497 0.13922 0.13015 0.12167 0.11374)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.19090 0.16696 0.15149 0.12771 0.10381 0.09091 0.07929 0.06916 0.05724 0.05053 0.04365 0.03771 0.03257)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}
# 3L 4D
# export r1_Array=(0.40326 0.37124 0.34422 0.32113 0.30092 0.26156 0.26029 0.23551 0.21825 0.20226 0.18744 0.17370 0.16098)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.33456 0.31738 0.27993 0.24610 0.22018 0.18389 0.17234 0.14912 0.13147 0.11590 0.10218 0.09009 0.07942)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}
# 3L 5D
# export r1_Array=(0.66151 0.66076 0.66001 0.65926 0.65851 0.65776 0.65701 0.65627 0.65552 0.65478 0.65404 0.65329 0.65255 0.65181 0.65107 0.65033)
# export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
# export r2_Array=(0.46935 0.43604 0.4051 0.37635 0.34964 0.32482 0.30177 0.28035 0.26045 0.24197 0.2248 0.20884 0.19402 0.18025 0.16746 0.15557)
# export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}
# 3L 6D
export r1_Array=(0.6778 0.67583 0.67387 0.67192 0.66997 0.66803 0.6661 0.66417 0.66224 0.66032 0.65841 0.6565 0.6546 0.6527 0.65081 0.64893)
export r1=${r1_Array[$SLURM_ARRAY_TASK_ID]}
export r2_Array=(0.55196 0.5202 0.49027 0.46207 0.43548 0.41043 0.38681 0.36456 0.34359 0.32382 0.30519 0.28763 0.27108 0.25549 0.24079 0.22693)
export r2=${r2_Array[$SLURM_ARRAY_TASK_ID]}


#2L
# export D2_Array=(0.10217 0.08694 0.07399 0.06296 0.05358 0.04559 0.03880 0.03302 0.02810 0.02391 0.02034 0.01731 0.01473)
# export r1=${2D_Array[$SLURM_ARRAY_TASK_ID]}
# export D3_Array=(0.20912 0.18695 0.16714 0.14942 0.13358 0.11942 0.10676 0.09544 0.08533 0.07628 0.06820 0.06097 0.05450)
# export r1=${D3_Array[$SLURM_ARRAY_TASK_ID]}
# export D4_Array=(0.34762 0.32184 0.29797 0.27587 0.25542 0.23648 0.21894 0.20270 0.18767 0.17375 0.16087 0.14894 0.13789)
# export r1=${D4_Array[$SLURM_ARRAY_TASK_ID]}
# export D5_Array=(0.83704 0.47702 0.45627 0.43642 0.41744 0.39928 0.38191 0.36530 0.34941 0.33421 0.31967 0.30577 0.29247)
# export r1=${D5_Array[$SLURM_ARRAY_TASK_ID]}
# export D6_Array=(0.54489 0.53769 0.53058 0.52357 0.51665 0.50982 0.50309 0.49644 0.48988 0.48340 0.47701 0.47071 0.46449)
# export r1=${D6_Array[$SLURM_ARRAY_TASK_ID]}
echo $N
echo $r1
echo $r2
echo $r3
echo $r4
echo $r5

# run script
/usr/bin/time -v ./testResults               \
                    -D $D                    \
                    -N $N                    \
                    -n 16                     \
                    -r $r1 $r2 $r3 # $r3 $r4 $r5                         